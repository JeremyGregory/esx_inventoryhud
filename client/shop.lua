local a=nil;
local b,c,d=nil,nil,{}
Citizen.CreateThread(function()
while true do 
Citizen.Wait(0)
player=GetPlayerPed(-1)coords=GetEntityCoords(player)if IsInRegularShopZone(coords)or IsInRobsLiquorZone(coords)or IsInYouToolZone(coords)or IsInWeaponShopZone(coords)then if IsInRegularShopZone(coords)then if IsControlJustReleased(0,38)then OpenShopInv("regular")Citizen.Wait(2000)end end;if IsInRobsLiquorZone(coords)then if IsControlJustReleased(0,38)then OpenShopInv("robsliquor")Citizen.Wait(2000)end end;if IsInYouToolZone(coords)then if b then if IsControlJustReleased(0,38)then OpenShopInv("youtool")Citizen.Wait(2000)end end end;if IsInWeaponShopZone(coords)then if IsControlJustReleased(0,38)then ESX.TriggerServerCallback('esx_license:checkLicense',function(e)if e then OpenShopInv("weaponshop")Citizen.Wait(2000)else exports['mythic_notify']:DoHudText('error',_U("license_check_fail"))end end,GetPlayerServerId(PlayerId()),'weapon')Citizen.Wait(2000)end end end end end)function OpenShopInv(f)text="shop"data={text=text}inventory={}ESX.TriggerServerCallback("suku:getShopItems",function(g)for h=1,#g,1 do table.insert(inventory,g[h])end end,f)Citizen.Wait(500)TriggerEvent("esx_inventoryhud:openShopInventory",data,inventory)end;RegisterNetEvent("suku:OpenCustomShopInventory")AddEventHandler("suku:OpenCustomShopInventory",function(type,i)text="shop"data={text=text}inventory={}ESX.TriggerServerCallback("suku:getCustomShopItems",function(g)for h=1,#g,1 do table.insert(inventory,g[h])end end,type,i)Citizen.Wait(500)TriggerEvent("esx_inventoryhud:openShopInventory",data,inventory)end)RegisterNetEvent("esx_inventoryhud:openShopInventory")AddEventHandler("esx_inventoryhud:openShopInventory",function(data,inventory)setShopInventoryData(data,inventory,weapons)openShopInventory()end)function setShopInventoryData(data,inventory)a=data;SendNUIMessage({action="setInfoText",text=data.text})items={}SendNUIMessage({action="setShopInventoryItems",itemList=inventory})end;function openShopInventory()loadPlayerInventory()isInInventory=true;SendNUIMessage({action="display",type="shop"})SetNuiFocus(true,true)end;RegisterNUICallback("TakeFromShop",function(data,j)if IsPedSittingInAnyVehicle(playerPed)then return end;if type(data.number)=="number"and math.floor(data.number)==data.number then TriggerServerEvent("suku:SellItemToPlayer",GetPlayerServerId(PlayerId()),data.item.type,data.item.name,tonumber(data.number))end;Wait(150)loadPlayerInventory()j("ok")end)RegisterNetEvent("suku:AddAmmoToWeapon")AddEventHandler("suku:AddAmmoToWeapon",function(k,l)AddAmmoToPed(GetPlayerPed(-1),k,l)end)function IsInRegularShopZone(coords)RegularShop=Config.Shops.RegularShop.Locations;for h=1,#RegularShop,1 do if GetDistanceBetweenCoords(coords,RegularShop[h].x,RegularShop[h].y,RegularShop[h].z,true)<1.5 then return true end end;return false end;function IsInRobsLiquorZone(coords)RobsLiquor=Config.Shops.RobsLiquor.Locations;for h=1,#RobsLiquor,1 do if GetDistanceBetweenCoords(coords,RobsLiquor[h].x,RobsLiquor[h].y,RobsLiquor[h].z,true)<1.5 then return true end end;return false end;function IsInYouToolZone(coords)YouTool=Config.Shops.YouTool.Locations;for h=1,#YouTool,1 do if GetDistanceBetweenCoords(coords,YouTool[h].x,YouTool[h].y,YouTool[h].z,true)<1.5 then return true end end;return false end;function IsInWeaponShopZone(coords)WeaponShop=Config.Shops.WeaponShop.Locations;for h=1,#WeaponShop,1 do if GetDistanceBetweenCoords(coords,WeaponShop[h].x,WeaponShop[h].y,WeaponShop[h].z,true)<1.5 then return true end end;return false end;Citizen.CreateThread(function()while true do Citizen.Wait(0)LicenseShop=Config.Shops.LicenseShop.Locations;player=GetPlayerPed(-1)coords=GetEntityCoords(player)for h=1,#LicenseShop,1 do if GetDistanceBetweenCoords(coords,LicenseShop[h].x,LicenseShop[h].y,LicenseShop[h].z,true)<3.0 then ESX.Game.Utils.DrawText3D(vector3(LicenseShop[h].x,LicenseShop[h].y,LicenseShop[h].z),"~r~[E]~s~ Untuk Membeli Lisensi",0.6)if b then if IsControlJustReleased(0,38)then ESX.TriggerServerCallback('esx_license:checkLicense',function(e)if e then exports['mythic_notify']:DoHudText('error',_U('license_shop_check'))else OpenBuyLicenseMenu()Citizen.Wait(2000)end end,GetPlayerServerId(PlayerId()),'weapon')end end end end end end)function OpenBuyLicenseMenu()ESX.UI.Menu.CloseAll()ESX.UI.Menu.Open('default',GetCurrentResourceName(),'shop_license',{title=_U('license_shop_title'),elements={{label='yes'..' ($'..Config.LicensePrice..')',value='yes'},{label='no',value='no'}}},function(data,m)if data.current.value=='yes'then ESX.TriggerServerCallback('suku:buyLicense',function(n)if n then m.close()exports['mythic_notify']:DoHudText('success','Kamu Berhasil Membeli Lisensi Senjata')end end)end end,function(data,m)m.close()end)end;Citizen.CreateThread(function()player=GetPlayerPed(-1)coords=GetEntityCoords(player)for o,p in pairs(Config.Shops.RegularShop.Locations)do CreateBlip(vector3(Config.Shops.RegularShop.Locations[o].x,Config.Shops.RegularShop.Locations[o].y,Config.Shops.RegularShop.Locations[o].z),_U('regular_shop_name'),3.0,Config.Color,Config.ShopBlipID)end;for o,p in pairs(Config.Shops.RobsLiquor.Locations)do CreateBlip(vector3(Config.Shops.RobsLiquor.Locations[o].x,Config.Shops.RobsLiquor.Locations[o].y,Config.Shops.RobsLiquor.Locations[o].z),_U('robs_liquor_name'),3.0,Config.Color,Config.LiquorBlipID)end;for o,p in pairs(Config.Shops.YouTool.Locations)do CreateBlip(vector3(Config.Shops.YouTool.Locations[o].x,Config.Shops.YouTool.Locations[o].y,Config.Shops.YouTool.Locations[o].z),_U('you_tool_name'),3.0,Config.Color,Config.YouToolBlipID)end;for o,p in pairs(Config.Shops.WeaponShop.Locations)do CreateBlip(vector3(Config.Shops.WeaponShop.Locations[o].x,Config.Shops.WeaponShop.Locations[o].y,Config.Shops.WeaponShop.Locations[o].z),_U('weapon_shop_name'),3.0,Config.WeaponColor,Config.WeaponShopBlipID)end;CreateBlip(vector3(-755.79,5596.07,41.67),"Cablecart",3.0,4,36)end)Citizen.CreateThread(function()while true do Player=nil;Citizen.Wait(0)local q=GetEntityCoords(PlayerPedId())local r,s,t=false,false;for o,p in pairs(Config.Shops)do for h=1,#p.Locations,1 do local u=GetDistanceBetweenCoords(q,p.Locations[h].x,p.Locations[h].y,p.Locations[h].z,true)if u<1.5 then s=false;if u<Config.MarkerSize.x then r=true;t=o;lastZone=o end end end end;if r and not hasAlreadyEnteredMarker then hasAlreadyEnteredMarker=true;TriggerEvent('suku:hasEnteredMarker',t)end;if not r and hasAlreadyEnteredMarker then hasAlreadyEnteredMarker=false;TriggerEvent('suku:hasExitedMarker',lastZone)end;if s then Citizen.Wait(500)end end end)AddEventHandler('suku:hasEnteredMarker',function(v)b='shop_menu'c=_U('shop_press_menu')d={zone=v}end)AddEventHandler('suku:hasExitedMarker',function(v)SendNUIMessage({display=false,clear=true})b=false;SetNuiFocus(false,false)end)Citizen.CreateThread(function()while true do Citizen.Wait(0)player=GetPlayerPed(-1)coords=GetEntityCoords(player)for o,p in pairs(Config.Shops.RegularShop.Locations)do if GetDistanceBetweenCoords(coords,Config.Shops.RegularShop.Locations[o].x,Config.Shops.RegularShop.Locations[o].y,Config.Shops.RegularShop.Locations[o].z,true)<3.0 then ESX.Game.Utils.DrawText3D(vector3(Config.Shops.RegularShop.Locations[o].x,Config.Shops.RegularShop.Locations[o].y,Config.Shops.RegularShop.Locations[o].z),"~r~[E]~s~ Untuk Berbelanja",0.6)end end;for o,p in pairs(Config.Shops.RobsLiquor.Locations)do if GetDistanceBetweenCoords(coords,Config.Shops.RobsLiquor.Locations[o].x,Config.Shops.RobsLiquor.Locations[o].y,Config.Shops.RobsLiquor.Locations[o].z+0.01,true)<3.0 then ESX.Game.Utils.DrawText3D(vector3(Config.Shops.RobsLiquor.Locations[o].x,Config.Shops.RobsLiquor.Locations[o].y,Config.Shops.RobsLiquor.Locations[o].z),"~r~[E]~s~ Untuk Berbelanja",0.6)end end;for o,p in pairs(Config.Shops.YouTool.Locations)do if GetDistanceBetweenCoords(coords,Config.Shops.YouTool.Locations[o].x,Config.Shops.YouTool.Locations[o].y,Config.Shops.YouTool.Locations[o].z+0.01,true)<3.0 then ESX.Game.Utils.DrawText3D(vector3(Config.Shops.YouTool.Locations[o].x,Config.Shops.YouTool.Locations[o].y,Config.Shops.YouTool.Locations[o].z),"~r~[E]~s~ Untuk Berbelanja",0.6)end end;for o,p in pairs(Config.Shops.WeaponShop.Locations)do if GetDistanceBetweenCoords(coords,Config.Shops.WeaponShop.Locations[o].x,Config.Shops.WeaponShop.Locations[o].y,Config.Shops.WeaponShop.Locations[o].z+0.01,true)<3.0 then ESX.Game.Utils.DrawText3D(vector3(Config.Shops.WeaponShop.Locations[o].x,Config.Shops.WeaponShop.Locations[o].y,Config.Shops.WeaponShop.Locations[o].z),"~r~[E]~s~ Untuk Berbelanja",0.6)end end end end)function CreateBlip(coords,text,w,x,y)local z=AddBlipForCoord(coords)SetBlipSprite(z,y)SetBlipColour(z,x)SetBlipScale(z,0.8)SetBlipAsShortRange(z,true)BeginTextCommandSetBlipName("STRING")AddTextComponentString(text)EndTextCommandSetBlipName(z)end